u  â‡ â€¢Import "/home/cph/bqn-test/test.bqn"
s  â‡ â€¢Import "/home/cph/bqn-code/lib/string.bqn"
fn â‡ â€¢Import "/home/cph/bqn-code/lib/fun.bqn"

testInput  â† "/home/cph/bqn-code/aoc/2024/data/03-test.txt"
testInputB â† "/home/cph/bqn-code/aoc/2024/data/03-testb.txt"
input      â† "/home/cph/bqn-code/aoc/2024/data/03.txt"

# Parsing
Parse â† â€¢file.Chars

# Solutions
IsInt â† { âˆ§Â´ğ•©âˆŠ'0'+â†•10 }
Split â† { âˆ¾")"âŠ¸s.SplitÂ¨"mul("s.Splitğ•© }
Prod  â† { n â† ','s.Splitğ•© â‹„ { ((2=â‰ )âˆ§(âˆ§Â´IsIntÂ¨))n ? Ã—Â´â€¢BQNÂ¨n ; 0 }}
A     â† { +Â´ProdÂ¨Splitğ•© }
B â† {
    s    â† Splitğ•©
    on   â† ("do("â‰¡Â¯3â†‘âŠ¢)Â¨s
    off  â† ("don't("â‰¡Â¯6â†‘âŠ¢)Â¨s
    mask â† 1â†“(0âŒˆ1âŒŠ+)`1âˆ¾on-off
    +Â´maskÃ—ProdÂ¨s
}

# Tests
u.UnitTest (A Parse testInput)  â‰¡ 161
# u.UnitTest (A Parse input)    â‰¡ 166905464
u.UnitTest (B Parse testInputB) â‰¡ 48
# u.UnitTest (B Parse input)    â‰¡ 72948684
