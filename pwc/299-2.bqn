# Link: https://theweeklychallenge.org/blog/perl-weekly-challenge-299

u  â‡ â€¢Import "/home/cph/bqn-test/test.bqn"
h  â‡ â€¢Import "/home/cph/bqn-code/lib/helper.bqn"
fn â‡ â€¢Import "/home/cph/bqn-code/lib/fun.bqn"

WordSearch â† { tğ•Šgrid:
    deltas â† âŸ¨0â€¿1,0â€¿Â¯1,1â€¿0,Â¯1â€¿0âŸ©
    Rec â† { posğ•Šlâ€¿d: {
        Â¬l fn.IsPrefix t ? 0 ; t=â—‹â‰ l ? 1 ;
        npos â† (gridâŠ¸h.Ibâˆ§{Â¬âˆ¨Â´â¥Šğ•©âŠ¸â‰¡Â¨d})Â¨âŠ¸/posâŠ¸+Â¨deltas
        âˆ¨Â´RecâŸœâŸ¨lâˆ¾posâŠ‘grid,dâˆ¾<posâŸ©Â¨npos }
    }
    âˆ¨Â´RecâŸœâŸ¨"",âŸ¨âŸ©âŸ©Â¨fn.I 1â¥ŠËœâ‰¢grid
}

# Tests
u.UnitTest ( "BDCA" WordSearch 4â€¿4â¥Š"ABDECBCABAADDBBC") â‰¡ 1
u.UnitTest ( "ABAC" WordSearch 4â€¿4â¥Š"AABBCCBACAAABBBB") â‰¡ 0
u.UnitTest ("CCCAA" WordSearch 4â€¿4â¥Š"BABACCCCABABBBAA") â‰¡ 1
