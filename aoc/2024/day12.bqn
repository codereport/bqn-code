u  â‡ â€¢Import "/home/cph/bqn-test/test.bqn"
h  â‡ â€¢Import "/home/cph/bqn-code/lib/helper.bqn"
fn â‡ â€¢Import "/home/cph/bqn-code/lib/fun.bqn"

miniInput â† â€¢pathâˆ¾"/data/12-mini.txt"
testInput â† â€¢pathâˆ¾"/data/12-test.txt"
input     â† â€¢pathâˆ¾"/data/12.txt"

# Parsing
Parse â† >â€¢file.Lines

# Solutions
FloodFill â† { gğ•Špsâ€¿upâ€¿f: # positionsâ€¿fence
    nâ€¿p  â† (âŠ‘âŸœgâŠ¸â‹ˆ) âŠ‘up
    next â† (Â¬âˆŠâŸœps)âŠ¸/pâŠ¸+Â¨h.del4
    m1   â† gâŠ¸h.IbÂ¨next            # mask 1
    in   â† m1âŠ¸/next               # pos in bounds
    m2   â† { Ã—â‰ in ? n=inâŠ‘g ; âŸ¨âŸ© } # mask 2
    nf   â† f++Â´m1(âˆ¾â—‹Â¬)m2          # new fence
    nps  â† âˆ§psâˆ¾â‹ˆp                 # new positions
    { (1<â‰ up)âˆ¨Ã—+Â´m2  ? g FloodFill âŸ¨nps,â·(1â†“up)âˆ¾m2/in,nfâŸ© ; npsâ€¿nf }
}

A â† { +Â´â‰ âŠ¸Ã—Â´Â¨â· ğ•©âŠ¸FloodFillÂ¨{(â‹ˆâŸ¨âŸ©)âˆ¾0â‹ˆËœâ‹ˆğ•©}Â¨fn.I 'A'â‰¤ğ•© }
B â† âŠ¢ # TODO

# Test
u.UnitTest (A Parse miniInput) â‰¡ 140
u.UnitTest (A Parse testInput) â‰¡ 1930
# u.UnitTest (A Parse input)     â‰¡ 1374934
# u.UnitTest (B Parse testInput) â‰¡ 1
# u.UnitTest (B Parse input)     â‰¡ 1
