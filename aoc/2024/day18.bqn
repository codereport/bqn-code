u  â‡ â€¢Import "/home/cph/bqn-test/test.bqn"
s  â‡ â€¢Import "/home/cph/bqn-code/lib/string.bqn"
h  â‡ â€¢Import "/home/cph/bqn-code/lib/helper.bqn"
fn â‡ â€¢Import "/home/cph/bqn-code/lib/fun.bqn"

testInput â† â€¢pathâˆ¾"/data/18-test.txt"
input     â† â€¢pathâˆ¾"/data/18.txt"

dimâ€¿n â† âŸ¨âŸ¨7,7âŸ©,12âŸ©
# dimâ€¿n â† âŸ¨âŸ¨71,71âŸ©,1024âŸ©

# Parsing
Parse â† { +Â´{ Â¯1âŒ¾(ğ•©âŠ¸âŠ‘)dimâ¥Š0 }Â¨nâ†‘s.NatsÂ¨â€¢file.Linesğ•© }

# Solutions
Flood â† { ğ•Šgâ€¿up:
    { 0=â‰ up    ? g ; posâ€¿n â† âŠ‘up
    { 0â‰ posâŠ¸âŠ‘g ? gâ€¿(1â†“up) ;
    g   â†© (nâŠ¸+)âŒ¾(posâŠ¸âŠ‘)g
    adj â† â‹ˆâŸœ(n+1)Â¨(0=gâŠ‘ËœâŠ¢)âŠ¸/gâŠ¸h.IbÂ¨âŠ¸/posâŠ¸+Â¨h.del4
    gâ€¿(adjâˆ¾Ëœ1â†“up) }}
}
A â† 1-Ëœ(dim-1)âŠ‘{ âŠ‘Flood â€¢_while_ (Ã—âˆ˜â‰ âŠ¢Â´) ğ•©â€¿âŸ¨âŸ¨0,0âŸ©â€¿1âŸ© }
B â† âŠ¢

# Tests
u.UnitTest (A Parse testInput) â‰¡ 22
# u.UnitTest (A Parse input)     â‰¡ 250
# u.UnitTest (B Parse testInput) â‰¡ 1
# u.UnitTest (B Parse input)     â‰¡ 1
