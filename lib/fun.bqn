_Tri      â‡ {(<Ë˜ğ”½âŒœËœğ•©)â†“ËœÂ¨1+â†•â‰ ğ•©}       # Triangle Product
_TriId    â‡ {(<Ë˜ğ”½âŒœËœğ•©)â†“ËœÂ¨â†•â‰ ğ•©}         # Triangle Product (including diagonal)
_Xt       â‡ { m â† ğ•¨âŒˆâ—‹â‰ ğ•© â‹„ ğ”½Â´mâŠ¸â†‘Â¨ğ•¨â€¿ğ•©} # Extend
_AdjMap   â‡ {Â¯1âŠ¸â†“ğ”½1âŠ¸â†“}
_ChunkBy  â‡ {(+`0âˆ¾Â·Â¬ğ”½_AdjMap)âŠ¸(âŠâŠ¸âŠ”)}
_ChunkKey â‡ {(0âˆ¾+`Differğ”½Â¨ğ•©)âŠ”ğ•©}

Chunk  â‡ {1â†“ğ•©âŠ”Ëœ+`0=ğ•¨|â†•â‰ ğ•©}
Pairs  â‡ âˆ¾â‹ˆ_TriËœ
Deltas â‡ -Ëœ _AdjMap
Differ â‡ â‰  _AdjMap
Group  â‡ = _ChunkBy
Rle    â‡ >Â·(âŠ‘â‹ˆâ‰ )Â¨Group
Freq   â‡ Rleâˆ§
I      â‡ /â—‹â¥ŠâŸœ(â†•â‰¢)      # indices for higher ranks
Iono   â‡ âŠ(Ã—-Â¬âˆ˜âŠ¢)â‰ âˆ˜âŠ£â‰ âŠ # index of negative one

IsPrefix â‡ â‰¤â—‹â‰ â—¶0â€¿(âŠ£â‰¡â‰ âŠ¸â†‘)
FindFull â‡ { Op â† {ğ•©âŒˆËœğ•¨-1} â‹„ mâ€¿n â† ğ•¨â‹ˆâ—‹â‰ ğ•© â‹„ (1âŒŠÂ·Op`mâŠ¸Ã—)nâ†‘ğ•¨â·ğ•© }

PowerSet     â‡ â¥Š(â†•2Ë˜)/Â¨< # from bqn crate
Permutations â‡ {âŠâŸœğ•©(â‰â†•0){âˆ¾Ë(0âˆ¾Ë˜1+ğ•©)âŠ¸âŠË˜â’Ë˜=âŒœËœâ†•ğ•¨}Â´-âŸœâ†•â‰ ğ•©}
Choose       â‡ { ğ•©(â¥Šâ‹ˆâŠ¸âˆ¾âŒœ)âŸğ•¨âŸ¨âŸ¨âŸ©âŸ© }
ChooseWR     â‡ { <Ë˜â·ğ•¨â†‘Ë˜Permutations ğ•© } # TODO: improve

Next â‡ {
    i â† âŠ¢Â´/<_AdjMapğ•© â‹„ x â† iâŠ‘ğ•©
    j â† âŠ¢Â´/ğ•©>x       â‹„ y â† jâŠ‘ğ•©
    âŒ½âŒ¾((1+i)âŠ¸â†“)yâŒ¾(iâŠ¸âŠ‘)xâŒ¾(jâŠ¸âŠ‘)ğ•©
}
