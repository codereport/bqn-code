u  â‡ â€¢Import "/home/cph/bqn-test/test.bqn"
s  â‡ â€¢Import "/home/cph/bqn-code/lib/string.bqn"
fn â‡ â€¢Import "/home/cph/bqn-code/lib/fun.bqn"

testInput â† "/home/cph/bqn-code/aoc/2024/data/08-test.txt"
input     â† "/home/cph/bqn-code/aoc/2024/data/08.txt"

# Parsing
Parse â† >â€¢file.Lines

# Solutions
Cx â† { (âŠâŠ‘âŸœğ•©Â¨)âŠ¸âŠ”fn.Idxs'.'â‰ ğ•© }     # coordinates
Ib â† âˆ§Â´(0â€¿0â‰¤âŠ¢)âˆ¾â‰¢âŠ¸>                 # in bounds
Dx â† +âŸœâŠ‘â‹ˆ-ËœâŸœ(âŠ¢Â´)                   # delta
An â† { ğ•¨âŠ¸IbÂ¨âŠ¸/âˆ¾-Â´âŠ¸DxÂ¨âˆ¾â‹ˆfn._TriËœğ•© } # antinode
A  â† { â‰ â·âˆ¾(ğ•©âŠ¸AnâŠ¢)Â¨Cxğ•© }

Dx2 â† { nâ€¿dğ•Šaâ€¿b:((bâŠ¸-)â‹ˆaâŠ¸+)Â¨dâŠ¸Ã—Â¨â†•n }            # delta
An2 â† { ğ•¨âŠ¸IbÂ¨âŠ¸/âˆ¾âˆ¾(((âŒˆÂ´â‰¢ğ•¨)â‹ˆ-Â´)âŠ¸Dx2)Â¨âˆ¾â‹ˆfn._TriËœğ•©} # antinode
B   â† { â‰ â·âˆ¾ğ•©âŠ¸An2Â¨Cxğ•© }

# Tests
u.UnitTest (A Parse testInput) â‰¡ 14
u.UnitTest (A Parse input)     â‰¡ 293
u.UnitTest (B Parse testInput) â‰¡ 34
u.UnitTest (B Parse input)     â‰¡ 934
