# Link: https://theweeklychallenge.org/blog/perl-weekly-challenge-288

âŸ¨UnitTestâŸ© â‡ â€¢Import "/home/cph/bqn-test/test.bqn"

# Slow One-Line Solution
ClosestPalindrome â† {âŠ‘(âŒ½âŠ¸â‰¡â€¢Fmt)Â¨âŠ¸/âˆ¾<Ë˜â‰>((â€¢BQNğ•©)(-â‹ˆ+)(1+â†•))10â‹†â‰ ğ•©}

# Faster Solution
Find               â† { ğ•© < 0 ? Â¯âˆ ; âŒ½âŠ¸â‰¡â€¢Fmt ğ•© ? ğ•© ; ğ•¨ ğ•Š ğ•¨ + ğ•© }
ClosestPalindrome2 â† { âŠ‘(âŒŠÂ´âŠ¸=Â·|t-âŠ¢)âŠ¸/Â¯1 â‹ˆâ—‹(FindâŸœ(+âŸœ(t â† â€¢BQNğ•©))) 1 }

# Tests
UnitTest (ClosestPalindrome "123" ) â‰¡ 121
UnitTest (ClosestPalindrome "2"   ) â‰¡ 1
UnitTest (ClosestPalindrome "1400") â‰¡ 1441
UnitTest (ClosestPalindrome "1001") â‰¡ 999
UnitTest (ClosestPalindrome "999" ) â‰¡ 1001
UnitTest (ClosestPalindrome "0"   ) â‰¡ 1

UnitTest (ClosestPalindrome2 "123"    ) â‰¡ 121
UnitTest (ClosestPalindrome2 "2"      ) â‰¡ 1
UnitTest (ClosestPalindrome2 "1400"   ) â‰¡ 1441
UnitTest (ClosestPalindrome2 "1001"   ) â‰¡ 999
UnitTest (ClosestPalindrome2 "999"    ) â‰¡ 1001
UnitTest (ClosestPalindrome2 "0"      ) â‰¡ 1
UnitTest (ClosestPalindrome2 "1231234") â‰¡ 1231321
